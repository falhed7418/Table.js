Table.prototype.Elements=[];Table.prototype.ElementKeys=[];Table.prototype.Template=null;Table.prototype.View=null;function Table(b,a){if(b!=null){if(a.elements!=null&&a.templateUrl!=null){Table.prototype.Elements=a.elements;Table.prototype.ElementKeys=b;this.loadTemplate(a.templateUrl)}else{if(a.elements==null&&a.templateUrl==null){Table.prototype.ElementKeys=b;this.loadHtml();Table.prototype.parseTemplate(Table.prototype.Template,Table.prototype.Elements,Table.prototype.ElementKeys)}else{console.log("Cannot load template url, parse template or find your specified template.")}}}else{console.log("No element keys specified")}}Table.prototype.loadHtml=function(){var f=document.getElementsByClassName("repeat")[0];var g={};var d="";if(f.tagName=="TABLE"){var e=f.getElementsByTagName("tr");var d='<table class="repeat">';d+="<tr>";for(var c=0;c<this.ElementKeys.length;c++){d+="<td>";d+="{$"+this.ElementKeys[c]+"$}";d+="</td>"}d+="</tr>";d+="</table>";for(var c=0;c<e.length;c++){var b={};for(var a=0;a<this.ElementKeys.length;a++){if(e[c].getElementsByClassName(this.ElementKeys[a]).length==1){b[this.ElementKeys[a]]=e[c].getElementsByClassName(this.ElementKeys[a])[0].textContent}}g[c]=b}}else{if(f.tagName=="UL"){}}Table.prototype.Template=d;Table.prototype.Elements=g};Table.prototype.loadTemplate=function(b){var a;if(window.XMLHttpRequest){a=new XMLHttpRequest()}else{if(window.ActiveXObject){a=new ActiveXObject("Microsoft.XMLHTTP")}}a.onreadystatechange=function(){if(a.readyState===4){Table.prototype.Template=a.responseText;Table.prototype.parseTemplate(Table.prototype.Template,Table.prototype.Elements,Table.prototype.ElementKeys)}else{}};a.open("GET",b,false);a.setRequestHeader("Content-Type","application/x-www-form-urlencoded");a.send(null)};Table.prototype.parseTemplate=function(o,b,p){var n,l;var h=[];for(var f=0;f<o.length;f){n=o.indexOf("{$",f);if(n!=-1){n+=2;l=o.indexOf("$}",f);h.push(o.substr(n,o.length-n-(o.length-l)));f=l+2}else{f=o.length}}var e,k;for(var f=0;f<o.length;f){n=o.indexOf('class="');if(n!=-1){n+=7;l=o.indexOf('"',n);var j=o.substr(n,o.length-n-(o.length-l));var g=j.indexOf("repeat");if(g!=-1){o=o.substr(0,n)+j.replace("repeat","")+o.substr(n+j.length);var d=o.substr(0,n).lastIndexOf("<")+1;var a=o.substr(d,o.length-d).indexOf(" ");var q=o.substr(d,a);a=o.substr(d,o.length-d).indexOf("</"+q+">")+4+q.length;k={start:d-1,length:a,text:o.substr(d-1,a)};f+=l.length}}else{f=o.length}}var m;if(k!=null){m=o.substr(0,k.start)+o.substr(k.start+k.length);var n=k.start;for(var f=0;f<b.length;f++){var c=k.text;for(var g=0;g<p.length;g++){c=c.replace("{$"+p[g]+"$}",b[f][p[g]])}m=m.substr(0,n)+c+m.substr(n);n+=c.length}}Table.prototype.View=m;return Table.prototype.View};Table.prototype.search=function(b,f){var a=[];if(f!=null){for(var e=0;e<Table.prototype.Elements.length;e++){var d=Table.prototype.Elements[e][f].search(b);if(d!=-1){a.push(Table.prototype.Elements[e])}}}else{for(var e=0;e<Table.prototype.Elements.length;e++){for(var c=0;c<Table.prototype.ElementKeys.length;c++){if(typeof Table.prototype.Elements[e][Table.prototype.ElementKeys[c]]==="undefined"){}else{var d=Table.prototype.Elements[e][Table.prototype.ElementKeys[c]].toLowerCase().search(b.toLowerCase());if(d!=-1){a.push(Table.prototype.Elements[e]);c+=Table.prototype.ElementKeys.length}}}}}return a};Table.prototype.redrawView=function(a){return Table.prototype.parseTemplate(Table.prototype.Template,a,Table.prototype.ElementKeys)};Table.prototype.sort=function(e,d,a){if(d!=null&&a.hasOwnProperty("asc")&&a.hasOwnProperty("type")){if(a.type=="date"||a.type=="time"||a.type=="datetime"){a.type="datetime"}else{if(a.type=="string"){}else{a.type=false}}if(a.type){var f=JSON.parse(JSON.stringify(e));var c;var g=false;while(!g){g=true;for(var b=0;b<f.length&&b+1<f.length;b++){if(a.type=="datetime"){if(a.asc){if(f[b][d]>f[b+1][d]){c=f[b];f[b]=f[b+1];f[b+1]=c;g=false}}else{if(f[b][d]<f[b+1][d]){c=f[b];f[b]=f[b+1];f[b+1]=c;g=false}}}}}return f}}};Table.prototype.filter=function(d,b){var c=[];for(var a=0;a<Table.prototype.Elements.length;a++){if(d(Table.prototype.Elements[a][b])){c.push(Table.prototype.Elements[a])}}return c};